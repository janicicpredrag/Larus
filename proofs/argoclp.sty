\def\proofstep#1#2{
\addtocounter{proofstepnum}{1}
\begin{changemargin}{\theproofstepnum}{#1}{0pt}
#2
\end{changemargin}
}

\newcounter{product_result}%

\newenvironment{changemargin}[3]{%
\begin{list}{}{%
\setlength{\topsep}{0pt}%
\dimen0=1pt\relax
\setcounter{product_result}{\the\numexpr #2 * 10 \relax}%
\addtocounter{product_result}{3}%
\setlength{\leftmargin}{\arabic{product_result}\dimen0}%
\setlength{\rightmargin}{#3}%
\setlength{\listparindent}{\parindent}%
\setlength{\itemindent}{\parindent}%
\setlength{\parsep}{\parskip}%
}%
\item[#1.]}
{\end{list}}

\newlength{\countertextwidth}

\def\proofstepnonum#1#2{
\settowidth{\countertextwidth}{\arabic{proofstepnum}}
\begin{changemarginnonum}{\the\countertextwidth}{#1}{0pt}
#2
\end{changemarginnonum}
}

\newenvironment{changemarginnonum}[3]{%
\begin{list}{}{%
\setlength{\topsep}{0pt}%
\dimen0=10pt\relax
\setlength{\leftmargin}{#2\dimen0}%
\setlength{\rightmargin}{#3}%
\setlength{\listparindent}{\parindent}%
\setlength{\itemindent}{\parindent}%
\setlength{\parsep}{\parskip}%
}%
\item[\hspace*{#1}]}
{\end{list}}


